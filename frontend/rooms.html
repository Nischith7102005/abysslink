<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Active Rooms ‚Äî AbyssLink</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Manrope:wght@200;400;600;800&family=Space+Mono:ital,wght@0,400;0,700;1,400&display=swap" rel="stylesheet">
<style>
:root {
--bg: #050505;
--surface: #0a0a0a;
--text-main: #ffffff;
--text-dim: #888888;
--border: #222222;
--grid-line: rgba(255, 255, 255, 0.03);
--ease-out: cubic-bezier(0.23, 1, 0.32, 1);
}
* {
margin: 0;
padding: 0;
box-sizing: border-box;
}
body {
background-color: var(--bg);
color: var(--text-main);
font-family: 'Manrope', sans-serif;
overflow-x: hidden;
-webkit-font-smoothing: antialiased;
cursor: default;
min-height: 100vh;
padding: 2rem;
}
.container {
max-width: 1400px;
margin: 0 auto;
position: relative;
z-index: 10;
}
nav {
display: flex;
justify-content: space-between;
align-items: center;
padding: 2rem 0;
margin-bottom: 3rem;
border-bottom: 1px solid var(--border);
}
.brand {
font-family: 'Space Mono', monospace;
font-weight: 700;
letter-spacing: -0.05em;
text-transform: uppercase;
font-size: 1.2rem;
}
.nav-items a {
font-family: 'Space Mono', monospace;
font-size: 0.8rem;
color: var(--text-main);
text-decoration: none;
margin-left: 2rem;
text-transform: uppercase;
opacity: 0.6;
transition: opacity 0.3s;
cursor: pointer;
}
.nav-items a:hover { opacity: 1; }
header {
margin-bottom: 3rem;
animation: fadeInDown 0.6s ease;
}
@keyframes fadeInDown {
from { opacity: 0; transform: translateY(-30px); }
to { opacity: 1; transform: translateY(0); }
}
h1 {
font-size: clamp(2.5rem, 5vw, 4rem);
font-weight: 200;
line-height: 0.9;
letter-spacing: -0.04em;
margin-bottom: 0.5rem;
}
.subtitle {
color: var(--text-dim);
font-size: clamp(1rem, 2vw, 1.2rem);
font-weight: 300;
}
.action-bar {
display: flex;
gap: 1rem;
margin-bottom: 3rem;
flex-wrap: wrap;
justify-content: space-between;
}
.action-left {
display: flex;
gap: 1rem;
flex-wrap: wrap;
}
.btn {
padding: 1rem 2rem;
border: none;
cursor: pointer;
font-family: 'Space Mono', monospace;
font-size: 0.8rem;
text-transform: uppercase;
font-weight: 700;
transition: all 0.3s var(--ease-out);
text-decoration: none;
display: inline-flex;
align-items: center;
}
.btn-primary {
background: var(--text-main);
color: var(--bg);
}
.btn-primary:hover {
transform: translateX(5px);
}
.btn-secondary {
background: transparent;
color: var(--text-main);
border: 1px solid var(--border);
}
.btn-secondary:hover {
background: var(--text-main);
color: var(--bg);
transform: scale(1.05);
}
.btn-danger {
background: transparent;
color: #ff6b6b;
border: 1px solid #ff6b6b;
}
.btn-danger:hover {
background: #ff6b6b;
color: var(--bg);
transform: scale(1.05);
}
.rooms-grid {
display: grid;
grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
gap: 2rem;
animation: fadeIn 0.6s ease;
}
@keyframes fadeIn {
from { opacity: 0; }
to { opacity: 1; }
}
.room-card {
background: var(--surface);
border: 1px solid var(--border);
padding: 2rem;
transition: all 0.4s var(--ease-out);
position: relative;
overflow: hidden;
}
.room-card::before {
content: '';
position: absolute;
top: 0;
left: -100%;
width: 100%;
height: 100%;
background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.03), transparent);
transition: left 0.5s;
}
.room-card:hover::before {
left: 100%;
}
.room-card:hover {
border-color: var(--text-main);
transform: translateY(-5px);
}
.room-header {
margin-bottom: 1.5rem;
padding-bottom: 1rem;
border-bottom: 1px solid var(--border);
}
.room-topic {
font-size: 1.5rem;
font-weight: 600;
color: var(--text-main);
margin-bottom: 0.5rem;
letter-spacing: -0.02em;
}
.room-meta {
display: flex;
flex-direction: column;
gap: 0.8rem;
margin-bottom: 1.5rem;
}
.timer {
display: inline-flex;
align-items: center;
gap: 0.5rem;
padding: 0.5rem 1rem;
border: 1px solid var(--border);
font-weight: 600;
color: var(--text-dim);
font-size: 0.8rem;
font-family: 'Space Mono', monospace;
text-transform: uppercase;
}
.timer.critical {
border-color: #ff6b6b;
color: #ff6b6b;
}
.room-actions {
display: flex;
gap: 1rem;
}
.btn-enter {
flex: 1;
background: var(--text-main);
color: var(--bg);
padding: 0.8rem;
text-align: center;
justify-content: center;
}
.empty-state {
text-align: center;
padding: 5rem 2rem;
animation: fadeIn 0.6s ease;
}
.empty-icon {
font-size: 6rem;
margin-bottom: 2rem;
opacity: 0.2;
animation: float 3s ease-in-out infinite;
}
@keyframes float {
0%, 100% { transform: translateY(0); }
50% { transform: translateY(-20px); }
}
.empty-state h2 {
font-size: 2rem;
margin-bottom: 1rem;
color: var(--text-dim);
font-weight: 200;
}
.empty-state p {
color: var(--text-dim);
margin-bottom: 2rem;
font-size: 1.1rem;
}
.modal {
display: none;
position: fixed;
top: 0;
left: 0;
width: 100%;
height: 100%;
background: rgba(0, 0, 0, 0.95);
justify-content: center;
align-items: center;
z-index: 1000;
animation: fadeIn 0.3s ease;
backdrop-filter: blur(10px);
}
.modal-content {
background: var(--surface);
padding: 3rem;
max-width: 500px;
width: 90%;
border: 1px solid var(--border);
animation: slideUp 0.4s ease;
}
@keyframes slideUp {
from { transform: translateY(50px); opacity: 0; }
to { transform: translateY(0); opacity: 1; }
}
.modal h2 {
color: var(--text-main);
margin-bottom: 2rem;
font-size: 2rem;
font-weight: 200;
font-family: 'Space Mono', monospace;
text-transform: uppercase;
letter-spacing: -0.02em;
}
.form-group {
margin-bottom: 1.5rem;
}
.form-group label {
display: block;
margin-bottom: 0.5rem;
color: var(--text-dim);
font-size: 0.8rem;
font-family: 'Space Mono', monospace;
text-transform: uppercase;
}
.form-group input {
width: 100%;
padding: 1rem;
border: 1px solid var(--border);
background: var(--bg);
color: var(--text-main);
font-size: 1rem;
font-family: 'Manrope', sans-serif;
transition: all 0.3s ease;
}
.form-group input:focus {
outline: none;
border-color: var(--text-main);
background: var(--surface);
}
.modal-actions {
display: flex;
gap: 1rem;
margin-top: 2rem;
}
.warning {
color: #ff6b6b;
margin-bottom: 2rem;
font-size: 0.85rem;
padding: 1rem;
background: rgba(255, 0, 0, 0.05);
border: 1px solid rgba(255, 0, 0, 0.2);
font-family: 'Space Mono', monospace;
}
@media (max-width: 768px) {
.rooms-grid { grid-template-columns: 1fr; }
.action-bar { flex-direction: column; }
.action-left { width: 100%; }
.room-actions { flex-direction: column; }
.modal-actions { flex-direction: column; }
nav { flex-direction: column; gap: 1rem; align-items: flex-start; }
.nav-items { display: flex; flex-wrap: wrap; }
.nav-items a { margin-left: 0; margin-right: 1rem; }
}
</style>
</head>
<body>
<div class="container">
<nav>
<div class="brand">AbyssLink</div>
<div class="nav-items">
<a href="landing.html">Home</a>
</div>
</nav>
<header>
<h1>Active Rooms</h1>
<p class="subtitle">Your temporary conversations</p>
</header>
<div class="action-bar">
<div class="action-left">
<a href="landing.html" class="btn btn-secondary">‚Üê Back</a>
<button class="btn btn-primary" onclick="openCreateModal()">+ Create Room</button>
<button class="btn btn-secondary" onclick="openJoinModal()">Join Room</button>
</div>
</div>
<div id="roomsContainer" class="empty-state">
<div class="empty-icon">üëª</div>
<h2>No Rooms Yet</h2>
<p>Create or join a room to begin.</p>
</div>
</div>

<!-- Create Modal -->
<div id="createModal" class="modal">
<div class="modal-content">
<h2>Create Session</h2>
<div class="warning">
 Save the Room Key and Password. Share both with participants.
</div>
<form onsubmit="handleCreateRoom(event)">
<div class="form-group">
<label>Room Topic</label>
<input type="text" id="topicInput" required placeholder="e.g. Project Alpha">
</div>
<div class="form-group">
<label>Password (min 8 chars)</label>
<input type="password" id="passwordInput" required minlength="8" placeholder="Access passphrase">
</div>
<div class="modal-actions">
<button type="submit" class="btn btn-primary" style="flex: 1;">Create & Enter</button>
<button type="button" class="btn btn-secondary" onclick="closeCreateModal()" style="flex: 1;">Cancel</button>
</div>
</form>
</div>
</div>

<!-- Join Modal -->
<div id="joinModal" class="modal">
<div class="modal-content">
<h2>Join Session</h2>
<form onsubmit="handleJoinRoom(event)">
<div class="form-group">
<label>Room Key</label>
<input type="text" id="joinRoomKey" required placeholder="Paste room key">
</div>
<div class="form-group">
<label>Password</label>
<input type="password" id="joinPassword" required placeholder="Access passphrase">
</div>
<div class="modal-actions">
<button type="submit" class="btn btn-primary" style="flex: 1;">Join Room</button>
<button type="button" class="btn btn-secondary" onclick="closeJoinModal()" style="flex: 1;">Cancel</button>
</div>
</form>
</div>
</div>

<script>
const API_URL = 'https://abysslink.onrender.com';

function openCreateModal() {
document.getElementById('createModal').style.display = 'flex';
document.getElementById('topicInput').focus();
}
function closeCreateModal() {
document.getElementById('createModal').style.display = 'none';
document.getElementById('topicInput').value = '';
document.getElementById('passwordInput').value = '';
}
function openJoinModal() {
document.getElementById('joinModal').style.display = 'flex';
document.getElementById('joinRoomKey').focus();
}
function closeJoinModal() {
document.getElementById('joinModal').style.display = 'none';
document.getElementById('joinRoomKey').value = '';
document.getElementById('joinPassword').value = '';
}

async function handleCreateRoom(e) {
e.preventDefault();
const topic = document.getElementById('topicInput').value.trim();
const password = document.getElementById('passwordInput').value;
if (password.length < 8) {
alert('Password must be at least 8 characters');
return;
}
try {
const res = await fetch(`${API_URL}/api/rooms/create`, {
method: 'POST',
headers: { 'Content-Type': 'application/json' },
body: JSON.stringify({ topic, password })
});
const data = await res.json();
if (!res.ok) throw new Error(data.error || 'Create failed');
closeCreateModal();
// Redirect with room key
window.location.href = `chat.html?room=${data.roomId}&password=${encodeURIComponent(password)}&topic=${encodeURIComponent(topic)}`;
} catch (err) {
alert('Failed to create room. Check backend.');
console.error(err);
}
}

async function handleJoinRoom(e) {
e.preventDefault();
const roomKey = document.getElementById('joinRoomKey').value.trim();
const password = document.getElementById('joinPassword').value;
if (!roomKey || !password) return;
try {
const res = await fetch(`${API_URL}/api/rooms/validate`, {
method: 'POST',
headers: { 'Content-Type': 'application/json' },
body: JSON.stringify({ roomId: roomKey, password })
});
if (!res.ok) {
alert('Invalid room key or password');
return;
}
closeJoinModal();
window.location.href = `chat.html?room=${roomKey}&password=${encodeURIComponent(password)}`;
} catch (err) {
alert('Connection error');
console.error(err);
}
}

document.addEventListener('keydown', (e) => {
if (e.key === 'Escape') {
closeCreateModal();
closeJoinModal();
}
});
</script>
</body>
</html>
